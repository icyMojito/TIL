## # Git 입문

### GitHub

**소프트웨어 개발 프로젝트를 위한 소스코드 관리 서비스**

- **Git의 목적** 
  1. 버전관리
  2. 백업
  3. 협업



### 자주 쓰이는 용어

- **Repository (저장소)** : 하나의 프로젝트를 만들기 위해 사용되는 디지털 디렉토리나 저장공간이며 폴더와 파일, 이미지, 영상, 스프레드 시트, 데이터셋 등 프로젝트에 필요한 것들과 아이디어, 리소스, 다른 사람들과의 공유나 토론도 저장할 수 있음. "Repo"로 줄여 사용하기도 함
- **로컬 저장소** : 사용자의 컴퓨터에 존재
- **원격 저장소** : 네트워크에 존재
- **commit** : 파일을 추가하거나 변경 내용을 저장소에 기록하는 작업. 커밋한 시점으로 프로젝트를 복원할 수 있는 체크포인트를 찍는 명령
- **push** : 파일을 추가하거나 변경 내용을 원격 저장소에 업로드하는 작업
- **branch** : 병렬로 수행되는 여러 버전 관리를 위한 기능, 분기 기록이 가능하게 만듦
- **pull request** : 협업의 핵심. 수정한 내용을 제안하고 타인의 리뷰를 요청하는 기능



### 기본 사용법

**1. 저장소 초기화 = git init 또는 복제 = git clone**

- 저장소 초기화

  - GitHub 원격 저장소는 Create New Repository 버튼 이용

  - 로컬 저장소는 로컬 저장소로 지정할 디렉토리를 생성하고 그 디렉토리로 이동하여 Git 저장소로 만듦

    ​	mkdir {디렉토리 이름}

    ​	cd {디렉토리 이름}

    ​	git init

    > mk는 make directory, cd는 change directory, init은 initialize의 준말

- 저장소 복제

  - git clone {저장소 경로}

**2. 소스코드 파일의 작성과 편집**

**3. 소스코드 파일의 생성, 변경, 삭제를 git 인덱스에 추가 = git add**

- 소스코드 파일을 인덱스(_저장소에 커밋할 준비를 하기 위해 변경 내용을 임시로 저장할 위치_)에 추가

  - git add {파일 경로}

  - git add _*_    

    > *은 파일 시스템의 정규식으로 git add에 쓰면 어떤 파일이든 올 수 있음
    >
    > 파일 경로에 공백이 포함되면 ""로 파일 경로를 묶어줌

- 인덱스(스테이징 영역)에서 소스코드 파일을 제거

  - git rm --cached {파일 이름}

**4. 변경 결과를 로컬 저장소에 커밋 = git commit**

- 인덱스에 추가된 파일을 커밋

  - git commit -m _"간단한 커밋 메세지"_

    > 커밋 메시지는 현재형으로 작성해야 함
- 최종 커밋된 파일은 HEAD가 표시함
- 파일 추가가 완료되었는지 확인

  - git status

**5. 로컬 저장소를 푸쉬하여 원격 저장소에 반영 = git push**

- 원격 저장소에 반영하기 전에 원격 저장소의 정보를 추가

  - git remote add {원격 저장소의 별명} {GitHub 원격 저장소 주소}

    > origin은 원격 저장소의 별명의 예로 다른 단어로도 대체 가능

- 로컬 저장소의 변경 사항을 원격 저장소에 반영

  - git push {원격 저장소의 별명} {저장을 원하는 브랜치 이름}



### branch 사용법

- **브랜치 조회** : git branch    

  > 현재 브랜치에는 "*"가 표시됨

- **브랜치 생성** : git branch {생성할 브랜치 이름}

- **브랜치 이동** : git checkout {이동할 브랜치 이름}

- **브랜치 생성 & 이동** : git checkout -b {생성하고 이동할 브랜치 이름}

- **브랜치 푸쉬** : git push {원격 저장소 별명} {브랜치 이름}

   > 브랜치만 올리지 않고, 브랜치 안의 작업 내용까지 모두 푸쉬

- **브랜치 풀** : git pull {원격 저장소 별명} {가져올 소스코드가 있는 원격 저장소의 브랜치 이름}

- **브랜치 병합**

  1. git checkout {병합하고 싶은 브랜치 이름}
  2. git merge {병합할 브랜치가 있는 원격 저장소의 별명 / 병합할 브랜치 이름}

- **브랜치 삭제** : git branch -d {삭제할 브랜치 이름}



### Git 되돌리기

- **git reset {옵션} {돌아가고 싶은 커밋 id}** : 로컬 저장소의 커밋을 취소. 돌아가려는 커밋으로 저장소가 재설정되고, 해당 커밋 이후의 이력이 삭제됨

  - **git reset HEAD^** : 최신 커밋을 취소. 현재 staging area에 커밋 대기중인 파일도 취소됨

  - **git reset --soft HEAD~{돌아가고 싶은 커밋까지의 단계 숫자}** : 수정 변경된 파일의 내용과 내용의 인덱스는 남아있고, 커밋만 삭제

  - **git reset --hard HEAD~{돌아가고 싶은 커밋까지의 단게 숫자}** : 수정 변경된 파일의 내용도 사라지고 커밋도 삭제

  - **git reset --mixed HEAD~{돌아가고 싶은 커밋까지의 단계 숫자}** : 수정 변경된 파일의 내용은 남아있지만 인덱스가 초기화됨

    > git reset의 옵션을 적지 않으면 mixed로 동작함

  - ***git reset --hard ORIG_HEAD*** : reset 전의 커밋은 'ORIG_HEAD'라는 이름으로 참조. 실수로 reset을 한 경우 'ORIG_HEAD'로 reset하여 reset 실행 전의 상태로 되돌릴 수 있음

- **git revert {되돌릴 커밋 id}** : 선택한 버전을 취소해서 그 이전 상태로 되돌림. 특정 버전으로 되돌아가도 되돌린 버전 이후의 버전들의 이력은 남음



### 기타 Git 명령들

- **git config user.name {만든 사람의 닉네임} & git config user.email {만든 사람의 이메일}** : 현재 프로젝트 버전을 만든 사람에 대한 정보 설정. --global 옵션을 붙이면 전역으로 설정됨

- **git mv {수정 전 이름} {수정 후 이름}** : 파일과 폴더명을 변경하거나 이동

- **git rm {파일 이름}** : 파일을 삭제

- **git pull** : git pull만 사용하면 origin을 별명으로 한 원격 저장소의 모든 브랜치와 소스코드 파일 중 로컬 저장소에 없거나 변경된 브랜치와 파일들만 로컬 저장소에 받음. git fetch 명령을 실행하고 자동으로 merge(병합)한다.

  - **git pull {원격 저장소의 별명}** : 해당 원격 저장소의 모든 브랜치와 소스코드 파일 중 로컬 저장소에 없거나 변경된 브랜치와 파일들만 로컬 저장소에 받음 
  - **git pull {원격 저장소의 별명} {원격 저장소 내 브랜치 이름}** : 해당 원격 저장소의 해당 브랜치 중 로컬 저장소에 없거나 변경된 파일들만 로컬 저장소에 받음.

- **git log** : 로컬 저장소의 커밋 히스토리 탐색. -n 옵션으로 히스토리를 몇 개 볼 것인지 지정 가능 (git log -n 10). 특정 파일의 커밋 로그를 참조하려면 파일명을 지정

- **git status** : 저장소 상태를 체크. 어떤 파일이 저장소 안에 있는지, 커밋이 필요한 변경사항이 있는지, 현재 저장소의 어떤 브랜치에서 작업하고 있는지 등을 볼 수 있음

- **git show {커밋 id 혹은 HEAD}** : 커밋의 상세 내용 확인

- **git grep {검색단어}** : 저장소에서 특정 단어가 포함된 파일을 검색

- **git remote** : 원격 저장소의 이름 목록 조회

- **git remote -v** : 원격 저장소의 자세한 목록 조회

- **git remote rm {원격 저장소 이름}** : 원격 저장소 제거

- **git diff** : 작업 트리와 인덱스의 변경 사항을 표시. HEAD나 커밋 아이디를 지정하면 작업 트리와 지정된 HEAD와의 변경사항을 표시

- **git diff {원래 브랜치 이름} {비교 대상 브랜치 이름}** : 두 브랜치끼리 어떻게 바뀌었는지 비교

- **git checkout -- {파일 이름}** : 로컬 저장소의 변경 내용을 변경 전 상태로 되돌려줌

  > 인덱스에 추가된 변경 내용과 새로 생성한 파일은 그대로 남음

- **git fetch {원격 저장소 별명} {변경 이력을 가져올 브랜치 이름}** : 원격 저장소의(브랜치 이름까지 기재하면 해당 브랜치의) 최신 이력_변경사항을 가져옴. 로컬 저장소에 반영(merge)되지는 않음

- **git config format.pretty oneline** : log에서 확정본 commit 한 줄씩만 표시



### git merge VS git rebase

- git merge는 지정한 branch의 최종 결과만을 합병

- git rebase는 지정한 branch를 베이스로 합병

  | <span style="color:orange">git merge</span> | <span style="color:purple">git rebase</span>                 |
  | ------------------------------------------- | :----------------------------------------------------------- |
  | 지정한 branch의 최종 결과만을 합병          | 지정한 branch를 베이스로 합병                                |
  | branch의 컨텍스트 유지                      | 중복수정된 로그가 남지 않아 히스토리가 단순해짐              |
  | 히스토리가 복잡                             | 커밋 순서대로 rebase를 하는데<br>각 커밋마다 충돌 해결을 순서대로 해야함 |

   

### Git commit 메세지 작성 요령

- 제목과 본문을 한 줄 띄워 분리하기
- 제목은 최대한 간결하게 (영문 기준 50자 이내로)
- 제목 끝에 온점(.) 빼기
- 본문 줄 바꿈 유의 (영문 기준 72자마다)
- _본문은 '무엇을', '왜'에 맞춰 작성_



### ▣ 참조 링크

- <https://rogerdudler.github.io/git-guide/index.ko.html>
- <https://tagilog.tistory.com/377>
- <https://mrw0119.tistory.com/120>
- <https://nolboo.kim/blog/2013/10/06/github-for-beginner/>
- <http://www.devpools.kr/2017/02/05/초보용-git-되돌리기-reset-revert/>
- https://mylko72.gitbooks.io/git/content/
